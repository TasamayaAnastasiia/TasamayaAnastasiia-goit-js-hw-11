{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js"],"sourcesContent":["import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst formForSearching = document.querySelector(\".form_images\");\nconst inputSearch = document.querySelector(\".input_searching\");\nconst gallery = document.querySelector(\".image-gallery\");\n\nformForSearching.addEventListener(\"submit\", async (e) => {\n    e.preventDefault();\n\n    const searchQuery = inputSearch.value.trim();\n    if (!searchQuery) {\n        iziToast.error({\n            title: \"Error\",\n            message: \"Please enter a keyword for search\",\n        });\n        return;\n    }\n\n    const searchParams = new URLSearchParams({\n        key: \"42360153-ab2745711a491af6a9cf29268\",\n        q: searchQuery,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: true,\n    });\n\n    try {\n        const response = await fetch(`https://pixabay.com/api/?${searchParams.toString()}`);\n        if (!response.ok) {\n            throw new Error(\"Failed to fetch images\");\n        }\n        const data = await response.json();\n        if (data.hits.length === 0) {\n            throw new Error(\"No images found\");\n        }\n        renderImages(data.hits);\n    } catch (error) {\n        iziToast.error({\n            title: \"Error\",\n            message: error.message,\n        });\n    }\n});\n\nexport async function renderImages(images) {\n    gallery.innerHTML = '';\n    let cardHTML = ``;\n    \n    const loadingIndicator = document.querySelector(\".container-loader\");\n    loadingIndicator.style.display = 'block';\n\n    // для примера индикатора загрузки\n    await new Promise(resolve => setTimeout(resolve, 2000));\n    \n    images.forEach(image => {\n        cardHTML += `\n            <li class=\"image-card\">\n                <a class=\"gallery-link\" href=\"${image.webformatURL}\">\n                    <img class=\"img-example\" src=\"${image.webformatURL}\" alt=\"${image.tags}\"></img>\n                </a>\n\n                    <div class=\"tumb\">\n                        <ul class=\"box-info\">\n                            <li>\n                                <p>Likes</p>\n                                <p>${image.likes}</p>\n                            </li>\n                            <li>\n                                <p>Views</p>\n                                <p>${image.views}</p>\n                            </li>\n                            <li>\n                                <p>Comments</p>\n                                <p>${image.comments}</p>\n                            </li>\n                            <li>\n                                <p>Downloads</p>\n                                <p>${image.downloads}</p>\n                            </li>\n                        </ul>\n                    </div>\n            </li>\n        `;\n    });\n    \n    gallery.insertAdjacentHTML(\"beforeend\", cardHTML);\n    \n    loadingIndicator.style.display = 'none';\n\n    const galleryImage = new SimpleLightbox('.gallery-link', {\n      captionType: 'attr', \n      captionsData: 'alt',\n      captionDelay: 250,\n    });\n    galleryImage.refresh();\n}\n\n\n"],"names":["formForSearching","inputSearch","gallery","e","searchQuery","iziToast","searchParams","response","data","renderImages","error","images","cardHTML","loadingIndicator","resolve","image","SimpleLightbox"],"mappings":"6vBAMA,MAAMA,EAAmB,SAAS,cAAc,cAAc,EACxDC,EAAc,SAAS,cAAc,kBAAkB,EACvDC,EAAU,SAAS,cAAc,gBAAgB,EAEvDF,EAAiB,iBAAiB,SAAU,MAAOG,GAAM,CACrDA,EAAE,eAAc,EAEhB,MAAMC,EAAcH,EAAY,MAAM,KAAI,EAC1C,GAAI,CAACG,EAAa,CACdC,EAAS,MAAM,CACX,MAAO,QACP,QAAS,mCACrB,CAAS,EACD,MACH,CAED,MAAMC,EAAe,IAAI,gBAAgB,CACrC,IAAK,qCACL,EAAGF,EACH,WAAY,QACZ,YAAa,aACb,WAAY,EACpB,CAAK,EAED,GAAI,CACA,MAAMG,EAAW,MAAM,MAAM,4BAA4BD,EAAa,SAAQ,CAAE,EAAE,EAClF,GAAI,CAACC,EAAS,GACV,MAAM,IAAI,MAAM,wBAAwB,EAE5C,MAAMC,EAAO,MAAMD,EAAS,OAC5B,GAAIC,EAAK,KAAK,SAAW,EACrB,MAAM,IAAI,MAAM,iBAAiB,EAErCC,EAAaD,EAAK,IAAI,CACzB,OAAQE,EAAO,CACZL,EAAS,MAAM,CACX,MAAO,QACP,QAASK,EAAM,OAC3B,CAAS,CACJ,CACL,CAAC,EAEM,eAAeD,EAAaE,EAAQ,CACvCT,EAAQ,UAAY,GACpB,IAAIU,EAAW,GAEf,MAAMC,EAAmB,SAAS,cAAc,mBAAmB,EACnEA,EAAiB,MAAM,QAAU,QAGjC,MAAM,IAAI,QAAQC,GAAW,WAAWA,EAAS,GAAI,CAAC,EAEtDH,EAAO,QAAQI,GAAS,CACpBH,GAAY;AAAA;AAAA,gDAE4BG,EAAM,YAAY;AAAA,oDACdA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qCAOrDA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,qCAIXA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,qCAIXA,EAAM,QAAQ;AAAA;AAAA;AAAA;AAAA,qCAIdA,EAAM,SAAS;AAAA;AAAA;AAAA;AAAA;AAAA,SAMpD,CAAK,EAEDb,EAAQ,mBAAmB,YAAaU,CAAQ,EAEhDC,EAAiB,MAAM,QAAU,OAEZ,IAAIG,EAAe,gBAAiB,CACvD,YAAa,OACb,aAAc,MACd,aAAc,GACpB,CAAK,EACY,QAAO,CACxB"}